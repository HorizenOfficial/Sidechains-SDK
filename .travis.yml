os: linux
dist: focal
vm:
  size: x-large
language: generic

jobs:
  include:
    - language: python
      before_script:
        - sudo apt-get -y install python3-pip
        - pip3 install -r ./qa/test/requirements.txt
        - git clone https://github.com/HorizenOfficial/zen.git
        - cd zen
        - ./zcutil/build.sh -j$(nproc)
        - ./zcutil/build.sh --legacy-cpu -j$(nproc)
        - ./zcutil/fetch-params.sh
        - ./src/zend
        - cd qa/test
      script:
        - python test.py
    - language: node_js
      before_script:
        - cd qa/test
      script:
        - node test.js