openapi: "3.0.0"

info:
  version: "1.0"
  title: Sidechain Node API spec
  description: API docs for Sidechain node.

tags:
  - name: block
    description: Sidechain block operations
  - name: transaction
    description: Sidechain transaction operations
  - name: wallet
    description: Sidechain wallet operations
  - name: node
    description: Sidechain node operations
  - name: mainchain
    description: Sidechain mainchain operations
  - name: submitter
    description: Sidechain submitter operations
  - name: csw
    description: Cesead Sidechain Withdrawal operations

paths:

  # Sidechain block operations
  /block/findById:
    post:
      tags:
        - block
      summary: finds block by id
      description: Returns a single block and its height
      operationId: getBlock
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - blockId
              properties:
                blockId:
                  description: ID of block to return
                  type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      blockHex:
                        type: string
                      block:
                        $ref: '#/components/schemas/SidechainBlock'
                      height:
                        type: integer
                        format: int64
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /block/findLastIds:
    post:
      tags:
        - block
      summary: finds last block ids
      description: Returns an array of number last sidechain block ids
      operationId: getLastBlockIds
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - number
              properties:
                number:
                  description: The number of block ids to return
                  type: integer
                  format: int32
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      lastBlockIds:
                        type: array
                        items:
                          type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /block/findIdByHeight:
    post:
      tags:
        - block
      summary: finds a block id by height
      description: Returns a sidechain block Id by its height in a blockchain
      operationId: getBlockIdByHeight
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - height
              properties:
                height:
                  description: The height, in a blockchain, of the block to return
                  type: integer
                  format: int32
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      blockId:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /block/best:
    post:
      tags:
        - block
      summary: finds the best block
      description: Returns here best sidechain block id and height in active chain
      operationId: getBestBlockInfo
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      block:
                        $ref: '#/components/schemas/SidechainBlock'
                      height:
                        type: integer
                        format: int64
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /block/getFeePayments:
    post:
      tags:
        - block
      summary: gets the list of forgers fee payments paid after the given block was applied
      description: Returns the list of ZenBoxes that represents the forgers fee payments paid after the given block was applied.
      operationId: getFeePayments
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - blockId
              properties:
                blockId:
                  description: ID of block to return
                  type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      feePayments:
                        type: array
                        items:
                          $ref: '#/components/schemas/Box'
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /block/findBlockInfoById:
    post:
      tags:
        - block
      summary: finds SidechainBlockInfo by id
      description: returns SidechainBlockInfo for a single block and if it is in the active chain
      operationId: findBlockInfoById
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - blockId
              properties:
                blockId:
                  description: ID of block to return
                  type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      blockInfo:
                        $ref: '#/components/schemas/SidechainBlockInfo'
                      isInActiveChain:
                        type: boolean
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /block/startForging:
    post:
      tags:
        - block
      summary: starts forging
      description: Starts forging
      operationId: startForging
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      result:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /block/stopForging:
    post:
      tags:
        - block
      summary: stops forging
      description: Stops forging
      operationId: stopForging
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      result:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /block/generate:
    post:
      tags:
        - block
      summary: tries to generate new block by epoch and slot number
      description: Returns id of generated sidechain block
      operationId: generateBlockForEpochNumberAndSlot
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - epochNumber
                - slotNumber
              properties:
                epochNumber:
                  description: Epoch number
                  type: integer
                  format: int32
                slotNumber:
                  description: Slot number
                  type: integer
                  format: int32
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      blockId:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /block/forgingInfo:
    post:
      tags:
        - block
      summary: gets forging info
      description: Gets forging info
      operationId: getForgingInfo
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      consensusSecondsInSlot:
                        type: integer
                        format: int32
                      consensusSlotsInEpoch:
                        type: integer
                        format: int32
                      bestEpochNumber:
                        type: integer
                        format: int32
                      bestSlotNumber:
                        type: integer
                        format: int32
                      forgingEnabled:
                        type: boolean
                        description: True or False depending if forging is enabled
                    error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  # Sidechain transaction operations
  /transaction/allTransactions:
    post:
      tags:
        - transaction
      summary: finds all transactions in memory pool
      description: Returns an array of transaction ids if format=false, otherwise a JSONObject for each transaction
      operationId: getMemoryPool
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                format:
                  type: boolean
                  default: true
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      transactions:
                        type: array
                        items:
                          $ref: '#/components/schemas/Transaction'
                      transactionIds:
                        type: array
                        items:
                          type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /transaction/findById:
    post:
      tags:
        - transaction
      summary: finds transaction in memory pool, or in a block or in full blockchain
      description:  "All the possible behaviours are:\n
      1) blockHash set -> Search in block referenced by blockHash (do not care about txIndex parameter)\n
      2) blockHash not set, txIndex = true -> Search in memory pool, if not found, search in the whole blockchain\n
      3) blockHash not set, txIndex = false -> Search in memory pool"
      operationId: findById
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - transactionId
              properties:
                transactionId:
                  type: string
                blockHash:
                  type: string
                  default: ""
                transactionIndex:
                  type: boolean
                  default: false
                format:
                  type: boolean
                  default: false
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      transaction:
                        $ref: '#/components/schemas/Transaction'
                      transactionBytes:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /transaction/decodeTransactionBytes:
    post:
      tags:
        - transaction
      summary: a human readable representation of the transaction
      description: Returns a JSON representation of a transaction given its byte serialization
      operationId: decodeRawTransaction
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - transactionBytes
              properties:
                transactionBytes:
                  type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      transaction:
                        $ref: '#/components/schemas/Transaction'
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /transaction/createCoreTransaction:
    post:
      tags:
        - transaction
      summary: creates and signs a Sidechain core transaction
      description: Creates and signs a Sidechain core transaction, specifying inputs and outputs. Return the new transaction as a hex string if format = false, otherwise its JSON representation.
      operationId: createCoreTransaction
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - transactionInputs
                - regularOutputs
                - withdrawalRequests
                - forgerOutputs
              properties:
                transactionInputs:
                  type: array
                  items:
                    type: object
                    required:
                      - boxId
                    properties:
                      boxId:
                        type: string
                        description: coin box id in hex
                regularOutputs:
                  type: array
                  items:
                    type: object
                    required:
                      - publicKey
                      - value
                    properties:
                      publicKey:
                        type: string
                      value:
                        type: integer
                        format: int64
                withdrawalRequests:
                  type: array
                  items:
                    type: object
                    required:
                      - mainchainAddress
                      - value
                    properties:
                      mainchainAddress:
                        type: string
                        description: base58check - Horizen pay to pubkeyhash address
                      value:
                        type: integer
                        format: int64
                forgerOutputs:
                  type: array
                  items:
                    type: object
                    required:
                      - publicKey
                      - vrfPubKey
                      - value
                    properties:
                      publicKey:
                        type: string
                      blockSignPublicKey:
                        type: string
                      vrfPubKey:
                        type: string
                      value:
                        type: integer
                        format: int64
                format:
                  type: boolean
                  default: false
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      transaction:
                        $ref: '#/components/schemas/Transaction'
                      transactionBytes:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /transaction/createCoreTransactionSimplified:
    post:
      tags:
        - transaction
      summary: creates and signs a Sidechain core transaction
      description: Creates and signs a Sidechain core transaction, specifying outputs and fee. Return the new transaction as a hex string if format = false, otherwise its JSON representation.
      operationId: createCoreTransactionSimplified
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - regularOutputs
                - withdrawalRequests
                - forgerOutputs
                - fee
              properties:
                regularOutputs:
                  type: array
                  items:
                    type: object
                    required:
                      - publicKey
                      - value
                    properties:
                      publicKey:
                        type: string
                      value:
                        type: integer
                        format: int64
                withdrawalRequests:
                  type: array
                  items:
                    type: object
                    required:
                      - mainchainAddress
                      - value
                    properties:
                      mainchainAddress:
                        type: string
                        description: base58check - Horizen pay to pubkeyhash address
                      value:
                        type: integer
                        format: int64
                forgerOutputs:
                  type: array
                  items:
                    type: object
                    required:
                      - publicKey
                      - vrfPubKey
                      - value
                    properties:
                      publicKey:
                        type: string
                      blockSignPublicKey:
                        type: string
                      vrfPubKey:
                        type: string
                      value:
                        type: integer
                        format: int64
                fee:
                  type: integer
                  format: int64
                format:
                  type: boolean
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      transaction:
                        $ref: '#/components/schemas/Transaction'
                      transactionBytes:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /transaction/sendCoinsToAddress:
    post:
      tags:
        - transaction
      summary: sends a transaction
      description: Creates and signs a regular transaction, specifying outputs and fee. Then validate and send the transaction. Then return the id of the transaction
      operationId: sendCoinsToAddress
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - transactionOutputs
              properties:
                outputs:
                  type: array
                  items:
                    type: object
                    required:
                      - publicKey
                      - value
                    properties:
                      publicKey:
                        type: string
                      value:
                        type: integer
                        format: int64
                fee:
                  type: integer
                  format: int64
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      transactionId:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /transaction/withdrawCoins:
    post:
      tags:
        - transaction
      summary: sends a transaction
      description: Creates and signs a regular transaction, specifying withdrawal outputs and fee. Then validate and send the transaction. Then return the id of the transaction
      operationId: withdrawCoins
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - outputs
              properties:
                outputs:
                  type: array
                  items:
                    type: object
                    required:
                      - mainchainAddress
                      - value
                    properties:
                      mainchainAddress:
                        type: string
                        description: base58check - Horizen pay to pubkeyhash address
                      value:
                        type: integer
                        format: int64
                fee:
                  type: integer
                  format: int64
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      transactionId:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /transaction/makeForgerStake:
    post:
      tags:
        - transaction
      summary: creates transaction with forger stake
      description: Creates and signs a Sidechain core transaction, specifying forger stake outputs and fee. Then validate and send the transaction. Then return the id of the transaction
      operationId: makeForgerStake
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - outputs
              properties:
                outputs:
                  type: array
                  items:
                    type: object
                    required:
                      - publicKey
                      - value
                      - vrfPubKey
                    properties:
                      publicKey:
                        type: string
                      blockSignPublicKey:
                        type: string
                      vrfPubKey:
                        type: string
                      value:
                        type: integer
                        format: int64
                fee:
                  type: integer
                  format: int64
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      transactionId:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /transaction/spendForgingStake:
    post:
      tags:
        - transaction
      summary: creates and signs sidechain core transaction
      description: Creates and signs sidechain core transaction, specifying inputs and outputs. Return the new transaction as a hex string if format = false, otherwise its JSON representation.
      operationId: spendForgingStake
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - transactionInputs
                - regularOutputs
                - forgerOutputs
              properties:
                transactionInputs:
                  type: array
                  items:
                    type: object
                    required:
                      - boxId
                    properties:
                      boxId:
                        type: string
                        description: id of ForgerBox
                regularOutputs:
                  type: array
                  items:
                    type: object
                    required:
                      - publicKey
                      - value
                    properties:
                      publicKey:
                        type: string
                      value:
                        type: integer
                        format: int64
                forgerOutputs:
                  type: array
                  items:
                    type: object
                    required:
                      - publicKey
                      - vrfPubKey
                      - value
                    properties:
                      publicKey:
                        type: string
                      blockSignPublicKey:
                        type: string
                      vrfPubKey:
                        type: string
                      value:
                        type: integer
                        format: int64
                format:
                  type: boolean
                  default: false
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      transaction:
                        $ref: '#/components/schemas/Transaction'
                      transactionBytes:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /transaction/sendTransaction:
    post:
      tags:
        - transaction
      summary: sends a transaction
      description: Validates and sends a transaction, given its serialization as input. Then return the id of the transaction
      operationId: sendRawTransaction
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - transactionBytes
              properties:
                transactionBytes:
                  type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      transactionId:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  # Sidechain wallet operations
  /wallet/allBoxes:
    post:
      tags:
        - wallet
      summary: finds all boxes
      description: Returns all boxes, excluding those which ids are included in excludeBoxIds list
      operationId: getAllBoxes
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                boxTypeClass:
                  description: Filter boxes of a given type
                  type: string
                excludeBoxIds:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      boxes:
                        type: array
                        items:
                          $ref: '#/components/schemas/Box'
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /wallet/coinsBalance:
    post:
      tags:
        - wallet
      summary: the global balance of coins boxes
      description: Returns the global balance for all types of coins boxes
      operationId: getCoinsBalance
      requestBody:
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      balance:
                        type: integer
                        format: int64
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /wallet/balanceOfType:
    post:
      tags:
        - wallet
      summary: the total balance of boxes of given type
      description: Returns the global balance for given type of boxes
      operationId: getBalance
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                boxType:
                  description: Filter balance for given box type
                  type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      balance:
                        type: integer
                        format: int64
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /wallet/createPrivateKey25519:
    post:
      tags:
        - wallet
      summary: new 25519 secret
      description: Creates new secret and returns corresponding address (public key)
      operationId: createPrivateKey25519
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      proposition:
                        $ref: '#/components/schemas/Proposition'
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /wallet/createVrfSecret:
    post:
      tags:
        - wallet
      summary: new Vrf secret
      description: Creates new Vrf secret and returns corresponding public key
      operationId: createVrfSecret
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      proposition:
                        $ref: '#/components/schemas/Proposition'
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /wallet/allPublicKeys:
    post:
      tags:
        - wallet
      summary: finds all public keys
      description: Returns the list of all walletâ€™s propositions (public keys)
      operationId: getPropositions
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                proptype:
                  description: Filter propositions of the given type
                  type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      propositions:
                        type: array
                        items:
                          $ref: '#/components/schemas/Proposition'
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /wallet/importSecret:
    post:
      tags:
        - wallet
      summary: Import a secret inside the wallet
      description: Import a secret and consequentially the corresponding proposition inside the wallet
      operationId: importSecret
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                privKey:
                  description: The secret to import
                  type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      proposition:
                        $ref: '#/components/schemas/Proposition'
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /wallet/exportSecret:
    post:
      tags:
        - wallet
      summary: Returns the secret corresponding to a proposition.
      description: Returns the secret corresponding to a proposition (taken from the wallet).
      operationId: exportSecret
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                publickey:
                  description: The proposition corresponding to the secret to export
                  type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      privKey:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /wallet/importSecrets:
    post:
      tags:
        - wallet
      summary: Import all the secrets taken from a file.
      description: Import all the secrets stored to a file. Each line of the file must be in the format "SECRET" + " " + "PROPOSITION"
      operationId: importSecrets
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                path:
                  description: Path to the file contaning the secrets
                  type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    $ref: '#/components/schemas/ImportSecretsResponse'
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /wallet/dumpSecrets:
    post:
      tags:
        - wallet
      summary: Export all the secrets taken from a file.
      description: Export all the secrets stored to a file. Each line of the file will be in the format "SECRET" + " " + "PROPOSITION"
      operationId: dumpSecrets
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                path:
                  description: Path where the files will be created
                  type: string
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      status:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  # Sidechain node operations
  /node/allPeers:
    post:
      tags:
        - node
      summary: finds all peers node
      description: Returns the list of all sidechain node peers
      operationId: allPeers
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      peers:
                        type: array
                        items:
                          $ref: '#/components/schemas/SidechainPeerNode'
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /node/connect:
    post:
      tags:
        - node
      summary: connects to a node
      description: Sends the request to connect to a sidechain node
      operationId: connect
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - host
                - port
              properties:
                host:
                  type: string
                port:
                  type: integer
                  format: int32
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      connectedTo:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /node/connectedPeers:
    post:
      tags:
        - node
      summary: find all connected peers node
      description: Returns the list of all connected sidechain node peers
      operationId: connectedPeers
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      peers:
                        type: array
                        items:
                          $ref: '#/components/schemas/SidechainPeerNode'
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /node/blacklistedPeers:
    post:
      tags:
        - node
      summary: finds all blacklisted peers node
      description: Returns the list of all blacklisted sidechain node peers
      operationId: blacklistedPeers
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    $ref: '#/components/schemas/BlacklistedPeersNode'
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /node/stop:
    post:
      tags:
        - node
      summary: stop the node
      description: stop the node in a gracefully way
      operationId: stop
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /node/storageVersions:
    post:
      tags:
        - node
      summary: find versions for all node storages
      description: Returns the list of all node storage versions
      operationId: getNodeStorageVersions
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      listOfVersions:
                        type: object
                        additionalProperties:
                          type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /node/sidechainId:
    post:
      tags:
        - node
      summary: Returns the sidechain id
      description: Returns the sidechain id
      operationId: getSidechainId
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      sidechainId:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  # Mainchain references info
  /mainchain/bestBlockReferenceInfo:
    post:
      tags:
        - mainchain
      summary: finds the best MC block header which has already been included in a SC block
      description: "Returns the best MC block header which has already been included in a SC block. Returns:\n
        1) Mainchain block reference hash with the most height; \n
        2) Its height in mainchain; \n
        3) Sidechain block ID which contains this MC block reference."
      operationId: bestBlockReferenceInfo
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      blockReferenceInfo:
                        $ref: '#/components/schemas/MainchainBlockInfo'
                      blockHex:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /mainchain/genesisBlockReferenceInfo:
    post:
      tags:
        - mainchain
      summary: returns genesis MC block header
      description: Returns genesis MC block header
      operationId: genesisBlockReferenceInfo
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      blockReferenceInfo:
                        $ref: '#/components/schemas/MainchainBlockInfo'
                      blockHex:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /mainchain/blockReferenceInfoBy:
    post:
      tags:
        - mainchain
      summary: finds Mainchain Block reference by its hash or by its height
      description: Finds Mainchain Block reference by its hash or by its height
      operationId: blockReferenceInfoBy
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                hash:
                  type: string
                height:
                  type: integer
                  format: int32
                format:
                  type: boolean
                  default: false
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      blocReferencekInfo:
                        $ref: '#/components/schemas/MainchainBlockInfo'
                      blockHex:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /mainchain/blockReferenceByHash:
    post:
      tags:
        - mainchain
      summary: finds Mainchain Block by its hash
      description: Finds Mainchain Block by its hash
      operationId: blockReferenceByHash
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - hash
              properties:
                hash:
                  type: string
                format:
                  type: boolean
                  default: false
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      blockReference:
                        $ref: '#/components/schemas/MainchainBlock'
                      blockHex:
                        type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  #Certificate Submitter operations
  /submitter/isCertGenerationActive:
    post:
      tags:
        - submitter
      summary: returns if certificate generation is in progress
      description: Returns if certificate generation is in progress
      operationId: isCertGenerationActive
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      state:
                        type: boolean
                        description: True or False depending on generation status
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /submitter/isCertificateSubmitterEnabled:
    post:
      tags:
        - submitter
      summary: returns if certificate submitter is enabled
      description: Returns if certificate submitter is enabled, so will automatically try to create and send certificate during the submission window.
      operationId: isCertificateSubmitterEnabled
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      enabled:
                        type: boolean
                        description: True or False depends on submitter status
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /submitter/enableCertificateSubmitter:
    post:
      tags:
        - submitter
      summary: enables automatic certificate submission
      description: Enables automatic certificate submission
      operationId: enableCertificateSubmitter
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /submitter/disableCertificateSubmitter:
    post:
      tags:
        - submitter
      summary: disables automatic certificate submission
      description: Disables automatic certificate submission
      operationId: disableCertificateSubmitter
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /submitter/isCertificateSignerEnabled:
    post:
      tags:
        - submitter
      summary: returns if certificate signing option is enabled
      description: Returns if certificate signing is enabled, so will automatically try to sign certificate and broadcast the signature to the network.
      operationId: isCertificateSignerEnabled
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      enabled:
                        type: boolean
                        description: True or False depends on submitter status
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /submitter/enableCertificateSigner:
    post:
      tags:
        - submitter
      summary: enables automatic certificate signing
      description: Enables automatic certificate signing
      operationId: enableCertificateSigner
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /submitter/disableCertificateSigner:
    post:
      tags:
        - submitter
      summary: disables automatic certificate signing
      description: Disables automatic certificate signing
      operationId: disableCertificateSigner
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  # Ceased Sidechain Withdrawal operations
  /csw/hasCeased:
    post:
      tags:
        - csw
      summary: returns current status of the Sidechain
      description: Returns current status of the Sidechain
      operationId: hasCeased
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      state:
                        type: boolean
                        description: True or False depending if Sidechain is ceased
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /csw/isCSWEnabled:
    post:
      tags:
        - csw
      summary: returns if the Ceased Sidechain Withdrawal is enabled in the Sidechain
      description: returns if the Ceased Sidechain Withdrawal is enabled in the Sidechain
      operationId: isCSWEnabled
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      cswEnabled:
                        type: boolean
                        description: True or False depending if CSW is enabled
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /csw/generateCswProof:
    post:
      tags:
        - csw
      summary: generates csw proof
      description: Tries to generate csw proof and returns current status of this operation
      operationId: generateCswProof
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - boxId
              properties:
                boxId:
                  type: string
                  description: coin box id in hex
                receiverAddress:
                  type: string
                  description: Horizen transparent address
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      state:
                        type: string
                        description: short description of current proof generation state
                      description:
                        type: string
                        description: full description of current proof generation state
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /csw/cswInfo:
    post:
      tags:
        - csw
      summary: csw information
      description: Retrieves information about csw proof for given box id
      operationId: cswInfo
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - boxId
              properties:
                boxId:
                  type: string
                  description: coin box id in hex
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      cswInfo:
                        $ref: '#/components/schemas/CswInfo'
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /csw/cswBoxIds:
    post:
      tags:
        - csw
      summary: returns list of available box ids for csw
      description: Returns list of available box ids for csw
      operationId: cswBoxIds
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      cswBoxIds:
                        type: array
                        items:
                          type: string
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

  /csw/nullifier:
    post:
      tags:
        - csw
      summary: retrieves nullifier
      description: Retrieves nullifier for given box id
      operationId: nullifier
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - boxId
              properties:
                boxId:
                  type: string
                  description: coin box id in hex
      responses:
        '200':
          description: successful operation
          content:
            application/json:
              schema:
                type: object
                properties:
                  result:
                    type: object
                    properties:
                      nullifier:
                        type: string
                        description: nullifier for given box id
                  error:
                    $ref: '#/components/schemas/SidechainApiErrorResponse'
        default:
          description: any kind of http error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SidechainApiError'

components:
  schemas:
    # Objects
    SidechainApiError:
      description: A SidechainApiError represents an HTTP error.
      type: object
      properties:
        code:
          type: integer
          format: int32
        reason:
          type: string
        detail:
          type: string

    SidechainApiErrorResponse:
      description: A SidechainApiErrorResponse represents a business logic error, not HTTP error.
      type: object
      properties:
        code:
          type: string
        description:
          type: string
        detail:
          type: string

    ImportSecretsResponse:
      description: The response of the importSecrets endpoint
      type: object
      properties:
        successfullyAdded:
          type: integer
          format: int32
        failedToAdd:
          type: integer
          format: int32
        summary:
          type: array
          items:
            $ref: '#/components/schemas/ImportSecretDetailError'

    ImportSecretDetailError:
      description: Error generated while trying to import a secret in the importSecrets endpoint
      type: object
      properties:
        lineNumber:
          type: integer
          format: int32
          description: File line number of the secret that was not imported.
        description:
          type: string

    BlacklistedPeersNode:
      type: object
      properties:
        addresses:
          type: array
          items:
            type: string

    SidechainPeerNode:
      type: object
      properties:
        address:
          type: string
        lastSeen:
          type: integer
          format: int64
        name:
          type: string
        connectionType:
          type: string

    Proposition:
      type: object
      properties:
        publicKey:
          type: string

    Signature25519:
      type: object
      properties:
        signature:
          type: string

    MainchainHeader:
      type: object
      properties:
        mainchainHeaderBytes:
          type: string
        version:
          type: integer
          format: int32
        hashPrevBlock:
          type: string
        hashMerkleRoot:
          type: string
        hashReserved:
          type: string
        hashSCMerkleRootsMap:
          type: string
        time:
          type: integer
          format: int64
        bits:
          type: integer
          format: int64
        nonce:
          type: string
        solution:
          type: string

    MC2SCAggregatedTransaction:
      type: object
      properties:
        id:
          type: string
        fee:
          type: integer
          format: int64
        timestamp:
          type: integer
          format: int64
        mc2scTransactionsMerkleRootHash:
          type: string
        newBoxes:
          type: array
          items:
            $ref: '#/components/schemas/Box'
        typeName:
          type: string
        isCustom:
          type: boolean

    Box:
      type: object
      properties:
        id:
          type: string
        proposition:
          $ref: '#/components/schemas/Proposition'
        value:
          type: integer
          format: int64
        nonce:
          type: integer
          format: int64
        typeName:
          type: string
        isCustom:
          type: boolean

    MainchainBlock:
      type: object
      properties:
        header:
          $ref: '#/components/schemas/MainchainHeader'
        sidechainRelatedAggregatedTransaction:
          $ref: '#/components/schemas/MC2SCAggregatedTransaction'
        merkleRoots:
          type: array
          items:
            type: object
            properties:
              key:
                type: string
              value:
                type: string

    Transaction:
      type: object

    MainchainBlockInfo:
      type: object
      properties:
        mainchainHeaderSidechainBlockId:
          type: string
        mainchainReferenceDataSidechainBlockId:
          type: string
        hash:
          type: string
        parentHash:
          type: string
        height:
          type: integer
          format: int64

    SidechainBlock:
      type: object
      properties:
        id:
          type: string
        parentId:
          type: string
        timestamp:
          type: integer
          format: int64
        mainchainBlocks:
          type: array
          items:
            $ref: '#/components/schemas/MainchainBlock'
        sidechainTransactions:
          type: array
          items:
            $ref: '#/components/schemas/Transaction'
        forgerPublicKey:
          $ref: '#/components/schemas/Proposition'
        signature:
          $ref: '#/components/schemas/Signature25519'

    SidechainBlockInfo:
      type: object
      properties:
        height:
          type: integer
        score:
          type: integer
          format: int64
        parentId:
          type: string
        timestamp:
          type: integer
          format: int64
        mainchainHeaderBaseInfo:
          type: array
          items:
            $ref: '#/components/schemas/MainchainHeaderBaseInfo'
        mainchainReferenceDataHeaderHashes:
          type: array
          items:
            type: string
        withdrawalEpochInfo:
          $ref: '#/components/schemas/WithdrawalEpochInfo'
        vrfOutputOpt:
          $ref: '#/components/schemas/VrfOutput'
        lastBlockInPreviousConsensusEpoch:
          type: string

    CswInfo:
      type: object
      properties:
        cswType:
          type: string
        amount:
          type: integer
        scId:
          type: string
        nullifier:
          type: string
        proofInfo:
          $ref: '#/components/schemas/CswProofInfo'
        activeCertData:
          type: string
        ceasingCumScTxCommTree:
          type: string

    CswProofInfo:
      type: object
      properties:
        status:
          type: string
        scProof:
          type: string
        receiverAddress:
          type: string

    MainchainHeaderBaseInfo:
      type: object
      properties:
        hash:
          type: string
        cumulativeCommTreeHash:
          type: string

    WithdrawalEpochInfo:
      type: object
      properties:
        epoch:
          type: integer
        lastEpochIndex:
          type: integer

    VrfOutput:
      type: object
      properties:
        bytes:
          type: string
